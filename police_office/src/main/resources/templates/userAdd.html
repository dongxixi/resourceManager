<!DOCTYPE html>
<html lang="zh-CN" xmlns:th="http://www.thymeleaf.org">

<head>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="description" content="">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="robots" content="all,follow">

    <title></title>
    <link rel="shortcut icon" th:href="@{staticResources/img/favicon.ico}"/>

    <!-- global stylesheets -->
    <link href="https://fonts.googleapis.com/css?family=Roboto+Condensed" rel="stylesheet">
    <link rel="stylesheet" th:href="@{staticResources/css/bootstrap.min.css}">
    <link rel="stylesheet" th:href="@{staticResources/font-awesome-4.7.0/css/font-awesome.min.css}">
    <link rel="stylesheet" th:href="@{staticResources/css/font-icon-style.css}">
    <link rel="stylesheet" th:href="@{staticResources/css/style.default.css}" id="theme-stylesheet">

    <!-- Core stylesheets -->
    <link rel="stylesheet" th:href="@{staticResources/css/form.css}">
</head>

<body>

<!--====================================================
                         MAIN NAVBAR
======================================================-->
<header class="header">
    <nav class="navbar navbar-expand-lg ">
        <div class="container-fluid ">
            <div class="navbar-holder d-flex align-items-center justify-content-between">
                <div class="navbar-header">
                    <a href="#" class="navbar-brand">
                        <div class="brand-text brand-big hidden-lg-down">公安应急系统</div>
                    </a>
                    <!-- 导航栏 -->
                    <a href="personAll" class="navbar-brand">
                        <div class="brand-text brand-big hidden-lg-down nav-link">人员管理</div>
                    </a>
                    <a href="carAll" class="navbar-brand">
                        <div class="brand-text brand-big hidden-lg-down nav-link">车辆管理</div>
                    </a>
                    <a href="showlog" class="navbar-brand">
                        <div class="brand-text brand-big hidden-lg-down nav-link">日志</div>
                    </a>
                    <a href="gotoUserAll" class="navbar-brand">
                        <div class="brand-text brand-big hidden-lg-down nav-link">系统用户管理</div>
                    </a>
                </div>
            </div>
            <ul class="nav-menu list-unstyled d-flex flex-md-row align-items-md-center">

                <!-- 全屏 -->
                <li class="nav-item d-flex align-items-center full_scr_exp"><a class="nav-link" href="#"><img
                        src="/staticResources/img/expand.png" onclick="toggleFullScreen(document.body)"
                        class="img-fluid" alt=""></a>
                </li>

                <!-- 账号切换 -->
                <li class="nav-item dropdown">
                    <a id="profile" class="nav-link logout" data-target="#" href="#"
                       data-toggle="dropdown">
                        <img src="staticResources/img/avatar-1.jpg" alt="..." class="img-fluid rounded-circle"
                             style="height: 30px; width: 30px;">
                    </a>
                    <ul aria-labelledby="profile" class="dropdown-menu profile">
                        <li>
                            <a rel="nofollow" href="gotoLogin" class="dropdown-item">
                                <div class="notification">
                                    <div class="notification-content"><i class="fa fa-power-off"></i>切换账号</div>
                                </div>
                            </a>
                        </li>
                        <li>
                            <a rel="nofollow" href="gotoLogin" class="dropdown-item">
                                <div class="notification">
                                    <div class="notification-content"><i class="fa fa-power-off"></i>注销</div>
                                </div>
                            </a>
                        </li>
                    </ul>
                </li>
            </ul>
        </div>
    </nav>
</header>

<!--====================================================
                        PAGE CONTENT
======================================================-->
<div class="page-content d-flex align-items-stretch">
    <div class="content-inner chart-cont">
        <div class="row">
            <div class="container">
                <div class="card form" id="form1">
                    <div class="card-header">
                        <h3><i class="fa fa-archive"></i>添加用户</h3>
                    </div>
                    <br>
                    <form form th:action="@{addUser}" method="post">
                        <div class="row form-group">
                            <div class="col-md-3"></div>
                            <div class="col-md-6">
                                <div class="form-group">
                                    <label for="UserName">用户名</label>
                                    <input name="userName" type="text" class="form-control" id="UserName"  />
                                    <span id="nametest" style="color: #db4437"></span>
                                </div>
                                <div class="form-group">
                                    <label for="Password">密码</label>
                                    <input name="password" type="text" class="form-control" id="Password"  />
                                    <span id="passwordtest" style="color: #db4437"></span>
                                </div>
                                <div class="form-group">
                                    <label for="role">角色</label>
                                    <select class="form-control-feedback" id="role" name="roleName">
                                        <option value="1">值班员</option>
                                        <option value="2">管理员</option>
                                    </select>
                                </div>
                            </div>
                        </div>
                        <div class="form-group row">
                            <div class="col-sm-10"></div>
                            <button type="submit" class="btn btn-general btn-white mr-2" name="add">添加</button>
                            <a class="btn btn-general btn-blue mr-2" href="gotoUserAll">返回</a>
                        </div>
                    </form>
                </div>
            </div>

        </div>
    </div>
</div>
<!-- FOOTER -->
<footer class="footer navbar-fixed-bottom text-md-center" style="background-color: #5e67d6">
    <div class="" style="padding-top: 30px;color: white;">应急系统 &copy; 2018.Company name LOVO J165 3组.</div>
</footer>

<!--Global Javascript -->
<script th:src="@{staticResources/js/jquery.min.js}"></script>
<script th:src="@{staticResources/js/popper/popper.min.js}"></script>
<script th:src="@{staticResources/js/tether.min.js}"></script>
<script th:src="@{staticResources/js/bootstrap.min.js}"></script>
<script th:src="@{staticResources/js/jquery.cookie.js}"></script>
<script th:src="@{staticResources/js/jquery.validate.min.js}"></script>
<script th:src="@{staticResources/js/chart.min.js}"></script>
<script th:src="@{staticResources/js/front.js}"></script>

<!--Core Javascript -->
<script>
    // function funpassword() {
    //     var $namet = $("input[name='password']");//这种取值是取到整个文本框
    //     var $show1 =$("#passwordtest");
    //     if ($namet.val().length==0){  //这样就是取到文本框里面所有的文本的长度，等于的是一个int类型
    //         $show1.html("密码不能为空");
    //     }else {
    //         $show1.html(" ");
    //     }
    // }
    //
    // function funname(){
    //         $("#userName").mouseleave(function(){
    //             var userName=$("#userName").val();
    //             $.post("findByUserName", {
    //                 userName: userName
    //             }, function(data){
    //                 if (data==1){
    //                     $("#nametest").html("用户名重复")
    //                 } else if(userName==""){
    //                     $("#nametest").html("用户名不为空");
    //                 }else {
    //                     $("#nametest").html("用户名可以使用")
    //                 }
    //
    //
    //             });
    //         });
    //     }

    $(function () {
        $("[name=add]").attr('disabled', true);
        var a;
        var b;
        $("[name=userName]").blur(function () {
            a=false;
            $(this).next().html("");

            var userName = $(this).val();

            if (userName == "" || userName.length == 0) {
                $(this).next().html("请输入用户名");
                $(this).next().css('color','red');
                $("[name=add]").attr('disabled', true);
            }  else {
                $.getJSON("findByUserName",{userName:userName},function (data) {
                    if (data=="0"){
                        a=true;
                        $("[name=userName]").next().css('color','green');
                        $("[name=userName]").next().html("可用");
                    } else{
                        $("[name=userName]").next().css('color','red');
                        $("[name=userName]").next().html("系统中已存在此用户");
                    }
                });

            }
            if (a==true && b==true) {
                $("[name=add]").removeAttr('disabled');
            }
        });
        $("[name=password]").blur(function () {
            b=false;
            $(this).next().html("");
            $(this).next().removeAttr("color");
            var password = $(this).val();
            if (password == "" || password.length == 0) {
                $(this).next().html("请输入密码");
                $(this).next().css('color','red');
                $("[name=add]").attr('disabled', true);
            } else {
                b=true;
                $(this).next().css('color','green');
                $(this).next().html("密码可用");
            }
            if (a==true && b==true) {
                $("[name=add]").removeAttr('disabled');
            }
        });
    });
</script>

</body>

</html>